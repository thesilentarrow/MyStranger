{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block body %}

<style type="text/css">

	

	{% comment %} prompt card {% endcomment %}
	.section_our_solution .row {
		align-items: center;
	  }
	  
	  .our_solution_category {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
	  }
	  .our_solution_category .solution_cards_box {
		display: flex;
		flex-direction: column;
		justify-content: center;
		height: 100%;
	  }
	  .solution_cards_box .solution_card {
		flex: 0 50%;
		background: #fff;
		box-shadow: 0 2px 4px 0 rgba(136, 144, 195, 0.2),
		  0 5px 15px 0 rgba(37, 44, 97, 0.15);
		border-radius: 15px;
		margin: 8px;
		padding: 10px 15px;
		position: relative;
		z-index: 1;
		overflow: hidden;
		min-height: 90px;
		transition: 0.7s;
	  }
	  
	  .solution_cards_box .solution_card:hover {
		{% comment %} background: #309df0; {% endcomment %}
		background: #009cda;
		color: #fff;
		transform: scale(1.1);
		z-index: 9;
	  }
	  
	  .solution_cards_box .solution_card:hover::before {
		background: rgb(85 108 214 / 10%);
		
	  }
	  
	  .solution_cards_box .solution_card:hover .solu_title h3,
	  .solution_cards_box .solution_card:hover .solu_description p {
		color: #fff;
	  }
	  
	  .solution_cards_box .solution_card:before {
		content: "";
		position: absolute;
		background: rgb(85 108 214 / 5%);
		width: 170px;
		height: 400px;
		z-index: -1;
		transform: rotate(42deg);
		right: -56px;
		top: -23px;
		border-radius: 35px;
	  }
	  
	  .solution_cards_box .solution_card:hover .solu_description button {
		background: #fff !important;
		color: #309df0;
	  }
	  
	  .solution_card .so_top_icon {
	  }
	  
	  .solution_card .solu_title h3 {
		color: #212121;
		font-size: 1.3rem;
		margin-top: 13px;
		margin-bottom: 13px;
	  }
	  
	  .solution_card .solu_description p {
		font-size: 15px;
		margin-bottom: 15px;
	  }
	  
	  .solution_card .solu_description button {
		border: 0;
		border-radius: 15px;
		background: linear-gradient(
		  140deg,
		  #42c3ca 0%,
		  #42c3ca 50%,
		  #42c3cac7 75%
		) !important;
		color: #fff;
		font-weight: 500;
		font-size: 1rem;
		padding: 5px 16px;
	  }
	  
	  .our_solution_content h1 {
		text-transform: capitalize;
		margin-bottom: 1rem;
		font-size: 2.5rem;
	  }
	  .our_solution_content p {
	  }
	  
	  .hover_color_bubble {
		position: absolute;
		background: rgb(54 81 207 / 15%);
		width: 100rem;
		height: 100rem;
		left: 0;
		right: 0;
		z-index: -1;
		top: 16rem;
		border-radius: 50%;
		transform: rotate(-36deg);
		left: -18rem;
		transition: 0.7s;
	  }
	  
	  .solution_cards_box .solution_card:hover .hover_color_bubble {
		top: 0rem;
	  }
	  
	  .solution_cards_box .solution_card .so_top_icon {
		width: 60px;
		height: 60px;
		border-radius: 50%;
		background: #fff;
		overflow: hidden;
		display: flex;
		align-items: center;
		justify-content: center;
	  }
	  
	  .solution_cards_box .solution_card .so_top_icon img {
		width: 40px;
		height: 50px;
		object-fit: contain;
	  }
	  
	  /*start media query*/
	  @media screen and (min-width: 320px) {
		.sol_card_top_3 {
		  position: relative;
		  top: 0;
		}
	  
		.our_solution_category {
		  width: 100%;
		  margin: 0 auto;
		}
	  
		.our_solution_category .solution_cards_box {
		  flex: auto;
		}
	  }
	  @media only screen and (min-width: 768px) {
		.our_solution_category .solution_cards_box {
		  flex: 1;
		}
	  }
	  @media only screen and (min-width: 1024px) {
		.sol_card_top_3 {
		  position: relative;
		  top: -3rem;
		}
		.our_solution_category {
		  width: 85%;
		  margin: 0 auto;
		}
	  }
	  

	.info-wrap{
        background: #272a34;
    }

    .contact-wrap{
        background: #1c1e25;
    }

    .wrapper {
    width: 100%;
    overflow: hidden;
    border-radius: 10px;
    -webkit-box-shadow: 0px 21px 41px -13px rgba(0, 0, 0, 0.18);
    -moz-box-shadow: 0px 21px 41px -13px rgba(0, 0, 0, 0.18);
    box-shadow: 0px 21px 41px -13px rgba(0, 0, 0, 0.18);
}

.btn-feedback{
    background-color: #009cda;
	border-radius:30px;
	font-size:15px;
}
.btn-feedback:hover{
    background-color: #038ac0;
}

/* Media query for tablet width 768px */
  @media only screen and (min-width: 768px) and (max-width: 1023px) { 

    .ftco-section{
        margin-top: 1em;
      }

	  
	}
	
	/* Media query for tablet width 320px */
	@media only screen and (min-width: 300px) and (max-width: 600px) { 

	  .solution_card{
		  min-height:70px!important;
	  }

    .ftco-section{
        margin-top: 1em;
      }

	.a-p-h{
		font-size:16px!important;
	}

	.a-p-s-h{
		font-size:14px!important;
	}


  }


	.bio-content{
		max-height:200px;
		overflow-y:auto;
		{% comment %} border:2px solid red; {% endcomment %}
	}

	body{
		height: 100vh;
        {% comment %} border: 2px solid red; {% endcomment %}
		display: flex;
		flex-direction: column;
        
	}

	.image-container{
		{% comment %} max-width: 250px; {% endcomment %}
		{% comment %} height: auto; {% endcomment %}
	}
	.field-heading{
		color: var(--secondary-text-color);
	}
	.icon-container:hover {
		opacity: 0.3;
		cursor: pointer;
	}
	.friends-icon{
		/* color: #4287f5; */
		color: #009cda;
		font-size: 40px;
	}
	.person-add-icon{
		/* color: #4287f5; */
		color: #009cda;
		font-size: 40px;
	}
	.friend-text{
		font-weight: 500;
		color: black;
	}
	.friends-btn{
		background-color: #cccccc;
		border-color: #cccccc;
		color: #000;
		font-weight: 500;
	}
	.friends-btn:hover {
		background-color: #bfbfbf;
		border-color: #bfbfbf;
	}
	.dropdown-toggle::after { 
		content: none; 
	}
	.card{
		border-radius: 8px;
	}

	.card-body{
		min-width: 22vw;
	}

	.material-icons{
		font-size: 30px;
	}
	.material-icons:hover{
		cursor: pointer;
	}
	.confirm-friend-request{
		color: green;
	}
	.confirm-friend-request:hover {
		opacity: 0.3;
	}
	.decline-friend-request:hover {
		opacity: 0.3;
	}
	.decline-friend-request{
		color: red;
	}
	.message-btn-text{
		font-weight: 500;
	}

	.cont-main{
		flex: 1;
		border: 1px solid rgba(0,0,0,.125);
		padding:0px;
		width:50vw;
		{% comment %} margin-top: 2em; {% endcomment %}
	}

	/* .update-btn:hover{	
    background-color:  #F9F9F9;
    color: #343A40;
} */

	.blue-color{
		color: #009cda;
	}

	/* input[type='radio']:checked:after {
	background-color: black;
	} */

	.radio2{
		{% comment %} border: 2px solid red; {% endcomment %}
    display: flex;
    height: 40px;
	}

	.radio2 p{
		margin-top: 0;
		margin-bottom: 1rem;
	}

	.radio-sec{
		display: flex;
		justify-content: space-between;
		margin-top: 1em;
	}

	.btn-send{
		background-color: #009cda;
	}

	/* .btn-send:hover{
		background-color: #0c87b8;
	} */


	.ac-header{
		height:58px;
		{% comment %} border:2px solid red; {% endcomment %}
		border-bottom: 1px solid rgba(0,0,0,.125);
		display: flex;
		align-items: center;
		padding: 10px;
		justify-content: space-between;
		z-index: 1000;
		position: fixed;
		background: white;
		width: 57%;
		{% comment %} width:100%; {% endcomment %}
	}


	.down-layer{
		{% comment %} border:2px solid black; {% endcomment %}
	}


	.vibe-layer{
		{% comment %} border:2px solid black; {% endcomment %}
		padding:1em;
		margin-top:3.5em;
		{% comment %} height:10px; {% endcomment %}
	}

	.bio-content p{
		margin:0px;
		font-size:10px;
	}

	.uplayer{
		justify-content: space-between;
		align-items:center;
	}

	.vibe-span{
		display: flex;
    flex-direction: column;
    {% comment %} border: 1px solid green; {% endcomment %}
    justify-content: center;
    align-items: center;
	}

	.btn-vibe{
		
	}

	.btn:hover{
        background-color: #343a40!important;
        cursor: default;
    }

    .btn-answer{
		padding: 0px;
		border-radius: 100px;
		width: 72px;
		height: 23px;
		{% comment %} margin-left: 10px; {% endcomment %}
		display: flex;
    justify-content: center;
    align-items: center;
    }

	.btn-nearby-ans{
		width: 125px!important;
	}

	.btn-nearby-req{
		width: 142px;
	}

    .btn-answer:hover{
        background-color:white!important;
        color:black;
    }

    .btn-answer span {
        font-size: 12px;
    }

	.span-up-left{
		display: flex;
    flex-direction: column;
    align-items: center;
	}

	a{
		color:#343a40;
	}

	.frnd-dropdown{
		padding: 2px;
    min-width: 90px;
    {% comment %} max-width: 100px; {% endcomment %}
    font-size: 10px;
	}


	/* Media query for tablet width 320px */
	@media only screen and (min-width: 300px) and (max-width: 600px) { 

		.cont-main{
			width:100vw;
		}

		.ac-header{
			width:100%;
		}

		

	}


	{% comment %} For the polls {% endcomment %}
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');
    
    .wrapper{
      background: #fff;
      border-radius: 15px;
      padding: 25px;
      max-width: 380px;
      width: 100%;
      box-shadow: 0px 5px 10px rgba(0,0,0,0.1);
    }
    .wrapper header{
      font-size: 22px;
      font-weight: 600;
    }
    .wrapper .poll-area{
      margin: 20px 0 15px 0;
    }
    .poll-area label{
      display: block;
      margin-bottom: 10px;
      border-radius: 5px;
      padding: 8px 15px;
      border: 2px solid #e6e6e6;
      transition: all 0.2s ease;
    }
    .poll-area label:hover{
      border-color: #ddd;
    }
    label.selected{
      border-color: #6665ee!important;
    }
    label .row{
      display: flex;
      pointer-events: none;
      justify-content: space-between;
    }
    label .row .column{
      display: flex;
      align-items: center;
    }
    label .row .circle{
      height: 19px;
      width: 19px;
      display: block;
      border: 2px solid #ccc;
      border-radius: 50%;
      margin-right: 10px;
      position: relative;
    }
    label.selected .row .circle{
      border-color: #6665ee;
    }
    label .row .circle::after{
      content: "";
      height: 11px;
      width: 11px;
      background: #6665ee;
      border-radius: inherit;
      position: absolute;
      left: 2px;
      top: 2px;
      display: none;
    }
    .poll-area label:hover .row .circle::after{
      display: block;
      background: #e6e6e6;
    }
    label.selected .row .circle::after{
      display: block;
      background: #6665ee!important;
    }
    label .row span{
      font-size: 16px;
      font-weight: 500;
    }
    label .row .percent{
      display: none;
    }
    label .progress{
      height: 7px;
      width: 100%;
      position: relative;
      background: #f0f0f0;
      margin: 8px 0 3px 0;
      border-radius: 30px;
      display: none;
      pointer-events: none;
    }
    label .progress:after{
      position: absolute;
      content: "";
      height: 100%;
      background: #ccc;
      width: calc(1% * var(--w));
      border-radius: inherit;
      transition: all 0.2s ease;
    }
    label.selected .progress::after{
      background: #6665ee;
    }
    label.selectall .progress,
    label.selectall .row .percent{
      display: block;
    }
    input[type="radio"],
    input[type="checkbox"]{
      display: none;
    }

    .poll-area{
        padding: 20px;
    }

    @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');

{% comment %}      
/* Styling the scrollbar track */
::-webkit-scrollbar {
    width: 10px; /* Set the width of the scrollbar */
}

/* Styling the scrollbar thumb (the draggable part) */
::-webkit-scrollbar-thumb {
    background: white; /* Set the color of the thumb */
    border-radius: 5px; /* Round the corners of the thumb */
}

/* Styling the scrollbar track (the non-draggable part) */
::-webkit-scrollbar-track {
    background: white; /* Set the color of the track */
    /* background: #eee;  */
    /* background: #bcdfed; Set the color of the track */
} {% endcomment %}

    .share-btn{
        border:none;
        background:none;
        margin-top:5px;
        font-size:14px;
    }

    .card-header{
        font-family: 'Varela Round', sans-serif;
    }
    

    .nearby-container{
        {% comment %} border: 2px solid green; {% endcomment %}
        width: 60vw;
        margin: auto;
        margin-top: 0.5em;

    }

    .card-main{
        width: 100%;
        border: 2px solid #e3e3e3;
        {% comment %} border: 1px solid #343a40; {% endcomment %}
        border-radius:4px;
        
    }

    .nearby-container{
        {% comment %} max-height: 80vh;
        overflow-y: scroll; {% endcomment %}
        {% comment %} border:2px solid green; {% endcomment %}
        width:75%;
    }

    .cont-main{
        {% comment %} max-height: 80vh; {% endcomment %}
        width:58%;
		overflow-y:scroll;
		overflow-x: hidden;
        {% comment %} overflow-y: scroll;
        border:2px solid red; {% endcomment %}
    }

    .card-header{
        display: flex;
        justify-content: space-between;
        height: 80px;
        align-items: center;
        {% comment %} background:whitesmoke; {% endcomment %}
        background:fafaf8;
        padding-top:1em;
        padding-bottom:1em;
        border-radius: 14px 14px 0px 0px!important;

        /* margin-bottom: 2em; */
    }
    
    /* .heading-top{
        border: 1px solid#d5cfcf; 
        {% comment %} font-size: 18px; {% endcomment %}
        display: flex;
        flex-direction: row;
        justify-content: space-between;
    } */

    .card-body{
        border-bottom: 1px solid #d5cfcf;
        display: flex;
        justify-content: space-between;
    }

    .nearby-num:hover{
        cursor: default;
    }

    .btn:hover{
        background-color: #343a40!important;
        cursor: default;
    }

    .btn-answer{
        border-radius : 100px;
        width: 100px;
        height: 35px;
        margin-left:10px;
    }

    .btn-answer:hover{
        background-color:white!important;
        color:black;
    }

    .btn-answer span {
        font-size:13px
    }

    .quora-textarea{
        height: 36px;
        border-radius: 100px;
        padding: 6px;
        font-size:13px;
        padding-left: 1em;
    }

    .answer-form{
        display:flex;
        align-items: center;
        width: 70%;
        margin:auto;
        margin-top:1em;
        margin-bottom:1em;
    }


    .card-header{
        min-height:80px;
        height:auto;
    }

    .card-main{
        border-radius:16px!important;
    }

    .card{
        border-radius:0px;
    }

    .add-friend-btn{
        border: none;
        background: none;
    }

    .tp1{
        display: flex;
    /* border: 1px solid red; */
    justify-content: space-between;
    align-items:center;
    }

    .tp1-right{
        display: flex;
    align-items: center;
    }

    .tp2{
        display: flex;
    justify-content: space-between;
    align-items: center;
    }

    .answers-card{
        overflow-y: scroll;
    {% comment %} border: 1px solid red; {% endcomment %}
    max-height: 300px;
    }

    .card-answer {
        border:none;
        {% comment %} border-bottom:2px solid #fafaf8; {% endcomment %}
        border-bottom:2px solid #d5dbdd;
    }
    
    .card-body-answer{
        border:none;
    }

    .like-btn{
        background: none;
    border: none;
    }
    
    .like-btn:hover{
        background-color:none!important;
        background:none;
    }
    
    .card-reply-main{
        max-height:130px;
        overflow-y:scroll;
    }

    .cancel_btn{
        background: none;
        border: none;
    }

    .dots{
        background: none!important;
        color: #343a40!important;
        border: none;
    }

    .dots:hover{
        background:none!important;
    }

    .dropdown-toggle::after {
        display: none;
    }

    .dropdown-toggle:focus {
        background-color: transparent !important;
    }

    .report-dpn{
        min-width: 6em!important;
        font-size:14px;
    }

    .on_add_class{
        color:#009cda;
        font-size:13px;
        cursor:pointer;
    }

    .innerbar{
        top: 0;
        position: absolute;
        z-index: 2;
        height: 29px;
        width: 0%;
        left: 0px;
        background: #7cdaff;
        transition: width 1s ease;
        border-radius: 8px 10px 10px 8px;
    }


	.card-conti{
		border-radius: 20px;
    padding: 5px 0px;
    flex-direction: row;
    /* width: 100%; */
    justify-content: space-around;
    border: 1px solid #343a40;
	margin: 7px 7px 12px 7px;
	}

	.active{
		color:#009cda!important;
	}
    {% comment %} .btn-answer:focus,
.btn-answer:active {
    outline: none !important;
    box-shadow: none !important;
} {% endcomment %}

    

    /* Media query for tablet width 320px */
  @media only screen and (min-width: 800px) { 

	.ac-header{
		height:75px;
		padding:20px;
	}

	.width-add-prom{
		width:95%!important;
	}

	.vibe-layer{
		margin-top: 4.5em;
	}

	.num{
		font-size:15px!important;
	}

    .thepoll-cont{
        height: 45px!important;
    }

    .innerbar{
        height: 44px!important;
    }

    .poll-optieon{
        top: 7px!important;
    font-size: 17px!important;
    }

    .percetion{
        position: absolute;
    right: 25px !important;
    z-index: 2;
    font-size: 16px!important;
    top: 10px !important;
    }

    .tick-percetion{
        right: 10px!important;
    top: 16px!important;
    font-size:12px!important;
    }

	.d-name{
		font-size:19px!important;
	}

	.d-gen{
		font-size:15px!important;
	}

	.d-email{
		font-size:13px!important;
	}

	.d-vscore{
		font-size:18px!important;
	}

	.vibe-layer{
		padding: 1.5em 4em;
	}

	.btn-nearby-ans{
		width: 140px!important;
	}

	.card-conti{
		margin: 1em!important;
	}

  }

    /* Media query for tablet width 320px */
  @media only screen and (min-width: 300px) and (max-width: 600px) { 

	.nearby-container{
        width:unset;
    }

    .container{
        width:100%;
    }

	.navbar{

		position: fixed;
		width: 100%;
		z-index: 3000;

	}

	.cont-main{
		margin-top: 53px;
	}

    .img1 img{
        width: 22px;
    }

    .small-text{
        font-size: 11px!important;
        margin-bottom: 4px!important;
        display: flex;
    flex-direction: column;

    
    }

    .timepamper{
        font-size: 9px;
    }

    .tp2{
        {% comment %} flex-direction:column; {% endcomment %}
        position:relative;
    }

    .total_ans_box{
        font-size: 10px!important;
        margin-left: 0em;
        position:absolute;
        right:0px;
        bottom:-14px;
    }

    .the-ques{
        {% comment %} font-size: 12px!important; {% endcomment %}
        font-size: 1em!important;
    }

    .ans_texti{
        font-size:13px;
    }

    .like-btn{
        font-size:12px!important;
    }

    .f12{
        font-size:12px!important;
    }

    .smaf{
        font-size: 11px!important;
    }

    .quora-textarea{
        width: 200px;
    height: 27px;
    border-radius: 100px;
    padding: 6px;
    font-size: 10px;
    padding-left: 1em;

    }

    .answer-form{
        display: flex;
    align-items: center;
    width: 88%;
    margin: auto;
    /* margin-top: 1em; */
    margin-bottom: 0.5em;
    }

    .btn-answer span {
        font-size: 10px;
    }

    .btn-answer{
        height: 27px;
        display: flex;
    justify-content: center;
    align-items: center;
    }

    .view_rep_btn{
        margin-top: -1.5em!important;
    }


    .replybox{
        margin-top: 6px;
    }

    .replybox button{
        margin-bottom: 1em;
    }

  }

  /* Lightbox styles */
  .image-lightbox {
	  
	  position: fixed;
	  top: 0;
	  left: 0;
	  width: 100%;
	  height: 100%;
	  background: rgba(0, 0, 0, 0.9);
	  overflow: auto;
	  z-index: 20000;
	  
	  display: none;
	  align-items: center;
	  justify-content: center;
  }
  
  .image-lightbox .lightbox-content {
	  position: relative;
  }
  
  .image-lightbox .lightbox-image {
	  max-width: 100%;
	  max-height: 100vh;
	  margin: auto;
	  display: block;
  }
  
  .image-lightbox .close-button {
	  position: absolute;
	  top: 15px;
	  right: 15px;
	  font-size: 30px;
	  color: #fff;
	  cursor: pointer;
  }
  
  /* Add more specific styling for your image container if needed */
  .image-container {
	  width: 100%;
	  margin: auto;
	  {% comment %} height: 150px; {% endcomment %}
	  overflow: hidden;
	  border: 1px solid #ccc;
  }
  
  .image-container img {
	  width: 100%;
	  height: 100%;
	  object-fit: contain;
  }

  .custom-alert {
    {% comment %} display: none; {% endcomment %}
    position: fixed;
	bottom: -170px;
    left: 0;
	height: 25%;
    width: 100%;
    background-color: #ff943b;
    color: white;
	font-weight:500px;
	z-index:1000;
    padding: 15px;
    box-sizing: border-box;
    transition: bottom 0.5s ease-in-out!important;
	border-radius: 21px 21px 0px 0px
}

.alert-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.close-alert {
    cursor: pointer;
    font-size: 20px;
    font-weight: bold;
}


</style>


<div class="container cont-main">

	<div class="ac-header">

		<div class="lefti">
			<span><strong class="d-name" style="font-size: 14px;">{{name}}</strong> <span class="ml-2 d-gen" style="font-size:10px;"> {% if gender == 'M' %}
		
					(Him)
			
			{% else %}
				
					(Her)
				
			{% endif %} </span></span>
			<p class="text-secondary" style="font-size:11px; margin-bottom:0px;">{% if request.user.is_authenticated and is_self %}

				<span class="d-email">{{email}}</span>

			  {% else %}

			  <span class="d-email">{{hidden_email}}</span>

			{% endif %}</p>
		</div>

		{% if request.user.is_authenticated and is_self %}
		<div class="righti">
			<a  class="" style="color:#343a40;" href="{% url 'account:edit' user_id=request.user.id %}"><i class="fa-regular fa-pen-to-square"></i></a>
		</div>
		{% endif %}

	</div>

	<div class="scroll-menu">

	<div class="vibe-layer">
		<div class="uplayer d-flex">
			{% comment %} <div class="up-right">

				<span class="vibe-span">
					<span class="d-vscore" style="font-size:15px">{{vibe_score}}</span>
					<strong class="d-vscore" style="font-size:15px" >Vibe Score</strong>
				</span>


			</div> {% endcomment %}

			<div class="up-right" id="vibescore" style="cursor: pointer;">
				<span class="vibe-span">
					<span class="d-vscore" style="font-size: 15px">{{vibe_score}}</span>
					<strong class="d-vscore" style="font-size: 15px">Vibe Score</strong>
				</span>
			</div>

			{% if request.user_agent.is_mobile %}
			
			<!-- Custom alert container -->
			<div class="custom-alert" id="customAlert">
				<div style="position:relative">
				<h6 style="text-align:center;">Vibe Score</h6>
				<span style="position:absolute; right: 2px;
				top: -8px;" class="close-alert" onclick="showCustomAlert()">&times;</span>
			</div>
				<div class="alert-content">
					<p stle="margin-bottom:0px;">Vibe score refers to the total no. of vibes & answers {{account.name}} has received on {% if account.gender == 'M' %}his{% elif account.gender == 'F' %}her{% else %}their{% endif %} posts</p>
				</div>
			</div>

			{% endif %}

			<div class="up-left" style="">

				<span class="d-flex">
					{% if is_self %}

					<a href="{% url 'friend:list' user_id=id %}" style="margin-right: 0.5em;">
						<span class='span-up-left'>

						<span style="font-size:10px" class="num">{{friends|length}}</span>
						{% comment %} <button style="font-size:10px" class="btn btn-sm btn-outline-dark"><i class="fa-solid fa-user-group" style="color: #009cda; font-size:10px;"></i> Friends</button> {% endcomment %}

						<button class="btn btn-sm btn-answer btn-outline-dark" type="button"><span><i class="fa-solid fa-user-group" style="color: #009cda; font-size:10px;"></i> Friends</span></button>

					</span>
				</a>

					<a href="{% url "account:nearby-uni" %}"><span class="span-up-left">
						<span style="font-size:10px" class="num">{{nearby_list_count}}</span>
						{% comment %} <button style="font-size:10px" class="btn btn-sm btn-outline-dark"><i class="fa-solid fa-location-dot" style="color: #009cda; font-size:10px;"></i> Nearby Universities</button> {% endcomment %}
						<button class="btn btn-sm btn-answer btn-outline-dark btn-nearby-ans" type="button"><span><i class="fa-solid fa-location-dot" style="color: #009cda; font-size:10px;"></i> Nearby Universities</span></button>
					</span></a>

					
					
			{% endif %}

			{% if is_friend %}

					
						<span class='span-up-left dropdown' style="margin-right:1em;">

						{% comment %} <span style="font-size:10px" class="">{{friends|length}}</span> {% endcomment %}
						{% comment %} <button style="font-size:10px" class="btn btn-sm btn-outline-dark"><i class="fa-solid fa-user-group" style="color: #009cda; font-size:10px;"></i> Friends</button> {% endcomment %}

						<button class="btn btn-sm btn-answer btn-outline-dark dropdown-toggle"  type="button" id="id_friends_toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Friends</span></button>

						<div class="dropdown-menu frnd-dropdown" aria-labelledby="id_friends_toggle">
							<a class="dropdown-item" href="#" onclick="removeFriend('{{id}}', onFriendRemoved)">Unfriend</a>
						</div>

					</span>
				

				{% comment %} <div class="dropdown pt-4 m-auto">
					<button class="btn btn-secondary dropdown-toggle friends-btn" type="button" id="id_friends_toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					Friends
					</button>
					<div class="dropdown-menu" aria-labelledby="id_friends_toggle">
						<a class="dropdown-item" href="#" onclick="removeFriend('{{id}}', onFriendRemoved)">Unfriend</a>
					</div>
				</div> {% endcomment %}

					<a href="{% url "account:nearby-uni" %}"><span class="span-up-left">
						{% comment %} <span style="font-size:10px" class="">{{nearby_list_count}}</span> {% endcomment %}
						
						<button onclick="createOrReturnPrivateChat('{{id}}')" class="btn btn-sm btn-answer btn-outline-dark" type="button"><span>Message</span></button>
					</span></a>

					{% comment %} <div class="d-flex flex-row align-items-center btn btn-primary m-2 px-4" style="background-color: #009cda;" onclick="createOrReturnPrivateChat('{{id}}')">
						<span class="material-icons m-auto" >
						message
						</span>
						<span class="message-btn-text m-auto pl-2">Message</span>
					</div>
					 {% endcomment %}
					
			{% endif %}


			{% if is_friend == False and is_self == False %}

						<!-- THEM to YOU -->
						{% if request_sent == 0 %}
						<div class="" style="padding: 5px 10px !important;
						border: 1px solid #343049; border-radius: 21px;">
							<div class="d-flex flex-row align-items-center">
								<span style="font-size: 10px;" class="friend-text align-items-center mr-2">Accept Friend Req</span>
								<span style="font-size: 10px;" id="id_cancel_{{id}}" class="decline-friend-request material-icons p-1" onclick='triggerDeclineFriendRequest("{{pending_friend_request_id}}")'>cancel</span>
								<span style="font-size: 10px;" id="id_confirm_{{id}}" class="confirm-friend-request material-icons p-1" onclick='triggerAcceptFriendRequest("{{pending_friend_request_id}}")'>check</span>
							</div>
						</div>

						
						{% endif %}

						<!-- You sent them a request -->
						{% if request_sent == 1 %}
						{% comment %} <div class="d-flex flex-column align-items-center pt-4"> {% endcomment %}
							{% comment %} <button class="btn btn-danger" id="id_cancel_friend_request_btn">
								Cancel Friend Request
							</button> {% endcomment %}

							<button  id="id_cancel_friend_request_btn" class="btn btn-sm btn-answer btn-outline-danger btn-nearby-ans" type="button"><span>Cancel Friend Req..</span></button>
							
						{% comment %} </div> {% endcomment %}
						{% endif %}

						<!-- No requests have been sent -->
						{% if request_sent == -1 %}
						{% comment %} <div class="d-flex flex-column align-items-center pt-4">
							<button class="btn btn-primary btn-send" style="background-color: #009cda;" id="id_send_friend_request_btn">
								Send Friend Request
							</button>
						</div> {% endcomment %}
						<button  id="id_send_friend_request_btn" class="btn btn-sm btn-answer btn-outline-dark" type="button"><span>Add Friend</span></button>
						{% endif %}
				{% endif %}


			</span>

			</div>
		</div> 
		<div class="down-layer mt-2">

			{% if bio %}

					
			<div class="bio-content">
				<p style="height:auto; overflow-y:auto; font-size:13px!important;">{{bio}}</p>
			</div>
				
			{% else %}

			{% if is_self %}

			<a style="font-size:10px; color:#009cda" href="{% url 'account:edit' user_id=request.user.id %}"><u>click here to add bio...</u></a>

			{% endif %}

			{% endif %}

			{% if friend_requests and is_self %}
			<div class="d-flex justify-content-center mt-2">
			<div class="btn-nearby-req" style="padding: 5px 10px !important;
			border: 1px solid #343049; border-radius: 21px;">
				<!-- Friend requests -->
		  		<div class="d-flex flex-column">
					<a href="{% url 'friend:friend-requests' user_id=id %}">
						<div class="d-flex flex-row align-items-center justify-content-center icon-container">
							<span style="font-size:10px" class="material-icons mr-2 person-add-icon">person_add</span><span class="friend-text" style="font-size:10px">Friend Requests ({{friend_requests|length}})</span>
						</div>
					</a>
				</div>
			</div>
		</div>
			{% endif %}

		</div> 
		
	</div>

	<div class="card card-conti">
		<div class="questions">
			<a class="{% if posts_active %}active{% endif %}" href="{% url "account:view" user_id=account.id %}?show=Posts">Posts</a>
		</div>
		
		{% if prompts or is_self or show_btn %}
		<div class="prompt active">
			
			<a class="{% if realme %}active{% endif %}" href="{% url "account:view" user_id=account.id %}?show=realme">Real Me</a>
		</div>
		{% endif %}
		<div class="answers">
			<a class="{% if answers_active %}active{% endif %}" href="{% url "account:view" user_id=account.id %}?show=vibes">Vibes</a>
		</div>
		
	</div>

	<div class="nearby-container">

		<div class="container">
			{% if question_top2_answers %}
			{% for question in question_top2_answers %}
			<div class="card card-main mb-4" id="card-main-{{question.0.id}}">
				<div class="card-header">
					<div style="width:100%" >
						<div class="tp1">
							<span class="text-secondary small-text" style="font-size:12px; margin-bottom:0px;">
								{% if posts_active %}
								<span class="text-secondary" style="font-size:9px; display:block;">~ {{account.name}} posted this </span>
								{% elif answers_active %}
								<span class="text-secondary" style="font-size:9px; display:block;">~ {{account.name}} vibed at this </span>
								{% endif %}
								<span class="heading-top"><a style="color:#009cda; margin-right:0.5em;" href="{% url "account:view" user_id=question.0.owner.id %}"><span>{{question.0.owner.name}} | {{question.0.owner.university_name}}</span> </a></span> 
								
								<span class="timepamper"> {{question.0.timestamp|naturaltime}} </span></span>
	
							<div class="tp1-right">
	
							{% if question.0.owner != request.user %}
								
								<button class="add-friend-btn" onclick="add_friend('send_req_btn-{{question.0.pk}}','{{question.0.owner.pk}}', 'cancel_req_btn-{{question.0.pk}}')" id="send_req_btn-{{question.0.pk}}"><span class="img1"><img src="{% static 'images/add.svg' %}"
									width="26px" alt="" srcset=""></span></button>
								<button class="d-none cancel_btn" onclick="cancel_friend('send_req_btn-{{question.0.pk}}','{{question.0.owner.pk}}', 'cancel_req_btn-{{question.0.pk}}')" id="cancel_req_btn-{{question.0.pk}}"><i class="fa-solid fa-xmark "
								style="color:red;"></i></button>
	
								<button class="share-btn" onclick="openShareModal('{{question.0.pk}}')"><i class="fa-solid fa-share-from-square" style="color: #343a40;"></i></button>
	
	
								{% comment %} <div class="dropdown">
							
									<button class="btn btn-secondary dropdown-toggle dots" type="button" data-bs-toggle="dropdown" aria-expanded="false">
										<span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span></button>
			
										
										<ul class="dropdown-menu report-dpn">
										  
										<li><button class="dropdown-item" type="button">Report</button></li>
										
										  
										</ul>
									  </div> {% endcomment %}
								
	
							{% endif %}
	
	
							{% if question.0.owner == request.user %}
	
							<button class="share-btn" onclick="openShareModal('{{question.0.pk}}')"><i class="fa-solid fa-share-from-square" style="color: #343a40;"></i></button>
	
							<div class="dropdown">
							
								<button class="btn btn-secondary dropdown-toggle dots" type="button" data-bs-toggle="dropdown" aria-expanded="false">
									<span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span></button>
		
									
									<ul class="dropdown-menu report-dpn">
	
									{% if request.user.is_authenticated %}
	
									  
									<li><button class="dropdown-item" onclick="myquestiondeletefunc('{{question.0.id}}', 'card-main-{{question.0.id}}')" type="button">Delete</button></li>
	
									{% else %}
										<li><button disabled class="dropdown-item" onclick="myquestiondeletefunc('', 'card-main')" type="button">Delete</button></li>
									{% endif %}
									
									  
									</ul>
								</div>
	
							{% endif %}
	
	
							
						</div>
	
					</div>
	
					<div class="tp2">
						<strong class="the-ques"  style="font-size: 17px; word-break: break-word;">{{question.0.question}}</strong>
						<span class="text-secondary total_ans_box d-flex justify-content-center" style="font-size:12px; margin-left: 2em; min-width:78px; " >{{ question.0.ans_count }} {% if question.0.ans_count < 2 %}answer{% else %}answers{% endif %}</span>
					</div>
					
					</div>
					
				</div>
				<!-- <div class="card-body heading-top">
				
					<p>Nearby Universities</p>
					<p>Users</p>  
				
				</div> -->

				{% if question.0.image %}
				{% comment %} <div class="image-container" style="width: 100%; margin:auto; height: 150px; overflow: hidden; border: 1px solid #ccc;">
					<img src="{{ question.0.image.url }}" alt="Image Preview" style="width: 100%; height: 100%; object-fit: contain;">
				</div> {% endcomment %}
	
				<a href="{{ question.0.image.url }}" class="image-lightbox-link" onclick="openLightboxnamo(this)">
					<div class="image-container" style="width: 100%; margin:auto; height: 190px; overflow: hidden; border:none;">
						<img src="{{ question.0.image.url }}" alt="Image Preview" style="width: 100%; height: 100%; object-fit: contain;" onload="adjustHeight(this)">
					</div>
				</a>
				
				<!-- Lightbox container -->
				<div class="image-lightbox">
					<span class="close-button" onclick="closeLightbox(this)">&times;</span>
					<div class="lightbox-content">
						<img class="lightbox-image" src="" alt="Full Image">
					</div>
				</div>
				{% elif question.0.video %}
                <video width="50%" height="auto" id="video-{{question.0.id}}" style="margin:auto;" controls muted loop onloadeddata="addVideoEventListeners(this)" {% if question.0.thumbnail %} poster="{{question.0.thumbnail.url}}"{% endif %}>
                    <source src="{{ question.0.video.url }}" type="video/mp4">
                </video>
			{% endif %}
	
				{% if not question.0.polls.all %}
							{% comment %} <p class="p-4" >No polls</p> {% endcomment %}
					{% else %}
					<div class="poll-area">
						<div style="border: 1px solid #343a40;
						position: relative;
						padding: 20px 20px 5px 20px;
						border-radius: 14px;" class="total-line">
							<div style="    background: white;
							left: 17px;
							position: absolute;
							top: -17px;
							padding: 5px;" class="total-count">
								<span style="font-size:14px;" id="poll-count-{{question.0.id}}">{{question.0.poll_count}} vibes</span>
							</div>

						{% if question.3 %}
							{% comment %} {{request.user.name}} has already polled this poll {% endcomment %}

							{% for poll in question.0.polls.all %}
						
	
								{% comment %} <div class="row">
								  <div class="column">
									<span class="circle"></span>
									<span class="text">{{poll.option}}</span>
								  </div>
								  <span class="percent"></span>
								</div>
								<div class="progress" style=''></div>
							  {% endcomment %}
	
							  <div class="poll-{{question.0.id}} thepoll-cont" id="poll-{{poll.id}}" style="padding: 6px 12px;
							  border: 1px solid #8d8d8d;
							  border-radius: 8px;
							  margin-bottom: 8px;
							  position: relative;
							  height: 30px;" 
							  
							  {% if request.user.is_authenticated %}    {% endif %} >
							  <div style="z-index:1; width:{{poll.percentage}}%!important"  class="innerbar" id="innerbar-{{poll.id}}">
							</div>
							  <span class="poll-optieon" style="position: absolute;
							  z-index: 2;
							  top: 2px;
							  font-size: 14px;">{{poll.option}}
								</span>
								<span style="font-size: 12px;"><span class="percetion" style="position:absolute; right:20px; z-index:2;" class="percentage" id="persia-{{poll.id}}">{{poll.percentage}}%</span><span style="font-size: 10px;
								{% if request.user in poll.polled.all %} display:flex; {% else %} display: none; {% endif %}
								
								position: absolute;
								right: 6px;
								top: 10px;
								z-index: 2;" class='tick-percetion' id="tick-{{poll.id}}"><i class="fa-solid fa-check" style="color: #009cda;"></i></span></span>
								<span style="
								display: none; 
								position: absolute;
								left: -14px;
								top: 17px;							
								z-index: 2;
								" id='ac-poll-{{poll.id}}'><i class="fa-solid fa-circle" style="color: #009cda; font-size:8px;"></i></span>
							</div>

							
							  
						{% endfor %}

						<span style="font-size:11px; display: none;" class="text-secondary;">{{account.name}} vibed at <i class="fa-solid fa-circle" style="color: #009cda; font-size:8px;"></i> </span>

							{% else %}

							{% for poll in question.0.polls.all %}
						
	
							{% comment %} <div class="row">
							  <div class="column">
								<span class="circle"></span>
								<span class="text">{{poll.option}}</span>
							  </div>
							  <span class="percent"></span>
							</div>
							<div class="progress" style=''></div>
						  {% endcomment %}

						  <div class="poll-{{question.0.id}} thepoll-cont" id="poll-{{poll.id}}" style="padding: 6px 12px;
						  border: 1px solid #8d8d8d;
						  border-radius: 8px;
						  margin-bottom: 8px;
						  position: relative;
						  height: 30px;" 
						  
						  {% if request.user.is_authenticated %} onclick="myselecfunc('{{poll.id}}','{{question.0.id}}')"  {% endif %} >
						  <div style="z-index:1;" class="innerbar" id="innerbar-{{poll.id}}">
						</div>
						  <span class="poll-optieon" style="position: absolute;
						  z-index: 2;
						  top: 2px;
						  font-size: 14px;">{{poll.option}}
							</span>
							<span style="font-size: 12px;"><span class="percetion" style="position:absolute; right:20px; z-index:2;" class="percentage" id="persia-{{poll.id}}"></span><span style="font-size: 10px;
							display: none;
							position: absolute;
							right: 6px;
							top: 10px;
							z-index: 2;" class='tick-percetion' id="tick-{{poll.id}}"><i class="fa-solid fa-check" style="color: #009cda;"></i></span></span>

							<span style="
								display: none; 
								position: absolute;
								left: -14px;
								top: 17px;							
								z-index: 2;
								" id='ac-poll-{{poll.id}}'><i class="fa-solid fa-circle" style="color: #009cda; font-size:8px;"></i></span>
						</div>
						  
					{% endfor %}

					<span style="display:none; font-size:11px;" class="text-secondary;" id="vibestat-{{question.0.id}}"> It's a match you both have vibed at <i class="fa-solid fa-circle" style="color: #009cda; font-size:8px;"></i> </span>

						{% endif %}
						
						
					</div>
						</div>
				{% endif %}
			   
				<div class="card">
					{% comment %} <div class="card-body" style="flex-direction: column;"> {% endcomment %}
						
						{% if not question.0.answers.all %}
							{% if not question.0.polls.all and not question.0.image and not question.0.video %}
							<p class="p-4" >Be the first to answer {{question.0.owner.name}}'s question</p>
							{% endif %}
						{% else %}
							{% comment %} {% for answer in question.answers.all %} {% endcomment %}
							{% load mptt_tags %}
							{% if not question.0.polls.all %}
								{% recursetree question.1 %}
	
								{% comment %} {% if node.ans_reported.all|length > 5 %}{% endif %} {% endcomment %}
								<div class="card card-answer card-reply" id="card-{{node.id}}">
									<div class="card-body card-body-answer" style="flex-direction: column;">
	
									
									{% comment %} {% if node.level ==0 %}{% endif %} {% endcomment %}
	
									<div style="width:100%" >
										<div class="tp1">
									
									<p class="text-secondary small-text answer-info" style="font-size:12px; margin-bottom:0px;"><a style="color:#009cda; margin-right:0.5em;" href="{% url "account:view" user_id=node.user.id %}"><span>{{node.user.name}} | {{node.user.university_name}}</span> </a>
										{% if request.user.id == node.user.id %}
										{% comment %} <span><button class="btn btn-sm btn-outline-dark ml-4" onclick="mydeletefunc('{{node.id}}', 'card-{{node.id}}')">delete</button></span> {% endcomment %}
										{% endif %}
									<span class="timepamper">
										 {{node.timestamp|naturaltime}} </span>
	
									</p>
	
									<div class="tp1-right">
	
										{% if node.user != request.user %}
	
										<button class="add-friend-btn" onclick="add_friend('send_req_btn-{{node.pk}}','{{node.user.pk}}', 'cancel_req_btn-{{node.pk}}')" id="send_req_btn-{{node.pk}}"><span class="img1"><img src="{% static 'images/add.svg' %}"
											width="26px" alt="" srcset=""></span></button>
										<button class="d-none cancel_btn" onclick="cancel_friend('send_req_btn-{{node.pk}}','{{node.user.pk}}', 'cancel_req_btn-{{node.pk}}')" id="cancel_req_btn-{{node.pk}}"><i class="fa-solid fa-xmark "
										style="color:red;"></i></button>
	
										{% endif %}
				
										
										{% comment %} <span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span> {% endcomment %}
	
										<div class="dropdown">
							
											<button class="btn btn-secondary dropdown-toggle dots" type="button" data-bs-toggle="dropdown" aria-expanded="false">
												<span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span></button>
					
												
												<ul class="dropdown-menu report-dpn">
												{% if node.user != request.user %}
	
												{% if request.user.is_authenticated %}
	
													<li><button class="dropdown-item" onclick="myreportfunc('{{node.pk}}')"  type="button">Report</button></li>
	
												{% else %}
	
												<li><button disabled class="dropdown-item" onclick="myreportfunc('')"  type="button">Report</button></li>
	
												{% endif %}
	
												{% else %}
												<li><button class="dropdown-item" onclick="mydeletefunc('{{node.id}}', 'card-{{node.id}}')" type="button">Delete</button></li>
												{% endif %}
												
												  
												</ul>
											  </div>
									
									</div>
	
								</div>
								</div>
	
									{% comment %} <p style="margin-bottom:0px; margin-top:2px;" >{{node.content}}</p> {% endcomment %}
									<span class="ans_texti" style="width:96%;">
									{% if node.content|length > 250 %}
									{% with first_part=node.content|slice:":250" second_part=node.content|slice:"250:" %}
									<span id="partial-paragraph">{{ first_part }}
	
										<span class="secondary-text mb-2" style="width:80px; border:none; background:none; color:#009cda; font-size:12px;" type="button"  id="contentcont-{{node.pk}}" onclick="myreadmorefunc('contentcont-{{node.pk}}')" data-bs-toggle="collapse" data-bs-target="#content-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
											... read more
										</span>
									
	
										<span class="collapse" id="content-{{node.pk}}">
	
										   
											{{ second_part }}
											
										</span>
	
									</span>
									
										
									{% endwith %}
								{% else %}
									<div id="full-paragraph">{{ node.content }}</div>
								{% endif %}
							</span>
	
							
							{% if node.level < 2  %}
								<div style="margin-top:4px; display:flex;"> {% endif %}
								
								{% if request.user not in node.likes.all %}
	
									<span id="like-{{node.pk}}" ><button class="like-btn" onclick="mylikefunc('{{node.pk}}')"><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
								{% else %}
	
								{% if request.user.is_authenticated %}
								
									<span id="like-{{node.pk}}" style="display:none;" ><button class=" like-btn" onclick="mylikefunc('{{node.pk}}')"><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
									{% else %}
	
									<span id="like-{{node.pk}}" style="display:none;" ><button class=" like-btn" ><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
									{% endif %}
	
								
									<span id="unlike2-{{node.pk}}" style="" ><button class=" like-btn" onclick="myunlikefunc('{{node.pk}}', 'unlike2-{{node.pk}}')"><i class="fa-solid fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="count-unlike2-{{node.pk}}"> {{node.likes.all|length}}</span></button></span>
	
								{% endif %}
	
								<span id="unlike-{{node.pk}}" style="display:none;" ><button class=" like-btn" onclick="myunlikefunc('{{node.pk}}','unlike-{{node.pk}}')"><i class="fa-solid fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="count-unlike-{{node.pk}}"> {{node.likes.all|length}}</span></button></span>
	
								
	
	
									{% if node.level < 2 %}
									{% if request.user.is_authenticated %}
									<span><button class="secondary-text f12" style="width:50px; border:none; background:none;  color: #009cda; font-size:14px;" type="button" data-bs-toggle="collapse" data-bs-target="#reply-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
										reply
									</button></span>
									{% endif %}
	
								</div>
								
									{% if request.user.is_authenticated %}
	
							   
								<div class="collapse replybox" id="reply-{{node.pk}}">
	
									
									
									<form class="answer-form" id="repform-{{node.id}}" onsubmit="submitForm(event, 'repform-{{node.id}}', 'null', 'reply-{{node.pk}}' , 'id_chat_message_input_answer-{{node.id}}' )" action="" method='post'> {% csrf_token %}
										<input hidden  type="text" name='question-id' id="question-{{question.0.id}}" value="{{question.0.id}}">
											<input hidden type="text" name='answer-id' id="parent-{{node.id}}" value="{{node.id}}">
											<textarea style="margin-bottom: 1em;" class="flex-grow-1 quora-textarea reply-textarea" placeholder="Reply on stranger's answer" name="id_chat_message_input" id="id_chat_message_input_answer-{{node.id}}"></textarea>
											<button class="btn btn-sm btn-answer btn-dark" type="Submit"><span>reply</span></button>
										</form>
									
								</div> 
	
										{% endif %}
									 
									{% endif %}
	
	
									
									{% if not node.is_leaf_node %}
	
									<button class="secondary-text mb-2 f12 view_rep_btn" style="width:80px; border:none; background:none; color:#009cda; font-size:13px; margin-left:6em; margin-top:-1.78em;" type="button" data-bs-toggle="collapse" data-bs-target="#replies-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
										view replies
									</button>
	
								{% comment %} </div> {% endcomment %}
	
									<div class="collapse" id="replies-{{node.pk}}">
	
										<div class="children pl-2 pl-md-5 card-reply-main">
										{{ children }}
										
										</div>
	
									</div>
									{% else %}
	
									{% comment %} {% if node.level < 2 %} </div>  {% endif %} {% endcomment %}
									
								
									{% endif %}
							
									
					</div>
					
				</div>
				
				{% comment %} <div class="card">
					<div class="card-body" style="flex-direction: column;"> {% endcomment %}
	
	
	
								{% endrecursetree %}
								{% endif %}
								
							{% comment %} {% endfor %} {% endcomment %}
						{% endif %}
	
						 {% comment %} <div>
							<form style="border:2px solid" class="answer-form" id="ansform-{{question.0.pk}}" onsubmit="submitForm(event, 'ansform-{{question.0.pk}}')" action="" method='post'> {% csrf_token %}
								<input hidden type="text" name='question-id' id="question-{{question.0.pk}}" value="{{question.0.pk}}">
								<textarea class="flex-grow-1 quora-textarea" placeholder="Answer stranger's question" name="id_chat_message_input" id="id_chat_message_input"></textarea>
								<button class="btn btn-sm btn-answer btn-dark" type="Submit"><span>Add answer</span></button>
							</form>
						</div>   {% endcomment %}
	
	
						<!-- <div> -->
						{% comment %} <p style="margin-bottom:4px;">it's such a shitty university u r not gonna believe what happened to .......</p> {% endcomment %}
						{% comment %} <p class="text-secondary" style="font-size:12px; margin-bottom:0px;">shreya | amity university</p></div> {% endcomment %}
						{% comment %} <a href="{% url "qna:minichat" user_id=question.pk %}" class="" style="font-size:14px; text-align: center; margin-bottom:0px;">see answers</a> {% endcomment %}
	
						{% comment %} <a href="" class="" style="font-size:14px; text-align: center; margin-bottom:0px;">see answers</a> {% endcomment %}
	
	
						</div>
	
						
	
				{% comment %} <div class="card"> {% endcomment %}
	
					{% if question.2 %}
	
						<button class="secondary-text mb-2 smaf" onclick="mytoogleanswersfunc('more-ans-{{question.0.pk}}')" style="width:115px; border:none; background:none; color:#009cda; font-size:12px;" type="button" id="more-ans-{{question.0.pk}}" data-bs-toggle="collapse" data-bs-target="#question-{{question.0.pk}}" aria-expanded="false" aria-controls="collapseExample">see more answers</button> 
	
						
	
						<div class="collapse" id="question-{{question.0.pk}}">
	
							<div class="card answers-card" >
								{% comment %} <div class="card-body" style="flex-direction: column;"> {% endcomment %}
								
	
								{% load mptt_tags %}
							
								{% recursetree question.2 %}
	
								<div class="card card-answer card-reply" id="card-{{node.id}}">
									<div class="card-body card-body-answer" style="flex-direction: column;">
	
									
									{% comment %} {% if node.level ==0 %}{% endif %} {% endcomment %}
	
									
									{% comment %} <p class="text-secondary" style="font-size:12px; margin-bottom:0px;">{{node.user.name}}</p> {% endcomment %}
	
									<div style="width:100%" >
										<div class="tp1">
	
									<p class="text-secondary small-text " style="font-size:12px; margin-bottom:0px;"><a style="color:#009cda; margin-right:0.5em;" href="{% url "account:view" user_id=node.user.id %}"><span>{{node.user.name}} | {{node.user.university_name}}</span> </a>
										{% comment %} {% if request.user.id == node.user.id %}
										<span><button class="btn btn-sm btn-outline-dark ml-4 d-none" onclick="mydeletefunc('{{node.id}}', 'card-{{node.id}}')">delete</button></span>
										{% endif %} {% endcomment %}
										<span class="timepamper">
											{{node.timestamp|naturaltime}} </span>
									
									</p>
	
									<div class="tp1-right">
	
										{% if node.user != request.user %}
	
											<button class="add-friend-btn" onclick="add_friend('send_req_btn-{{node.pk}}','{{node.user.pk}}', 'cancel_req_btn-{{node.pk}}')" id="send_req_btn-{{node.pk}}"><span class="img1"><img src="{% static 'images/add.svg' %}"
												width="26px" alt="" srcset=""></span></button>
											<button class="d-none cancel_btn" onclick="cancel_friend('send_req_btn-{{node.pk}}','{{node.user.pk}}', 'cancel_req_btn-{{node.pk}}')" id="cancel_req_btn-{{node.pk}}"><i class="fa-solid fa-xmark "
											style="color:red;"></i></button>
	
										{% endif %}
				
										
										{% comment %} <span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span> {% endcomment %}
	
										<div class="dropdown">
							
											<button class="btn btn-secondary dropdown-toggle dots" type="button" data-bs-toggle="dropdown" aria-expanded="false">
												<span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span></button>
					
												
												<ul class="dropdown-menu report-dpn">
												{% if node.user != request.user %}
													{% if request.user.is_authenticated %}
													 <li><button class="dropdown-item" onclick="myreportfunc('{{node.pk}}')" type="button">Report</button></li>
													{% else %}
													<li><button disabled class="dropdown-item" onclick="myreportfunc('')" type="button">Report</button></li>
													{% endif %}
												{% else %}
												<li><button class="dropdown-item" onclick="mydeletefunc('{{node.id}}', 'card-{{node.id}}')" type="button">Delete</button></li>
												{% endif %}
												
												  
												</ul>
											  </div>
									
									</div>
	
								</div>
							</div>
	
	
							
									{% comment %} <p style="margin-bottom:0px; margin-top:2px;" >{{node.content}}</p> {% endcomment %}
	
									<span 
									class="ans_texti"
									style="width:96%;">
										{% if node.content|length > 250 %}
										{% with first_part=node.content|slice:":250" second_part=node.content|slice:"250:" %}
										<span id="partial-paragraph">{{ first_part }}
		
											<span class="secondary-text mb-2" style="width:80px; border:none; background:none; color:#009cda; font-size:12px;" type="button"  id="contentcont-{{node.pk}}" onclick="myreadmorefunc('contentcont-{{node.pk}}')" data-bs-toggle="collapse" data-bs-target="#content-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
												... read more
											</span>
										
		
											<span class="collapse" id="content-{{node.pk}}">
		
											   
												{{ second_part }}
												
											</span>
		
										</span>
										
											
										{% endwith %}
									{% else %}
										<div id="full-paragraph">{{ node.content }}</div>
									{% endif %}
								</span>
									
	
									{% if node.level < 2  %}
								<div style="margin-top:4px; display:flex;"> {% endif %}
	
									{% if request.user not in node.likes.all %}
	
									<span id="like-{{node.pk}}" ><button class="like-btn" onclick="mylikefunc('{{node.pk}}')"><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
								{% else %}
	
								{% if request.user.is_authenticated %}
								
									<span id="like-{{node.pk}}" style="display:none;" ><button class="like-btn" onclick="mylikefunc('{{node.pk}}')"><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
									{% else %}
	
									<span id="like-{{node.pk}}" style="display:none;" ><button class="like-btn"><i class="fa-regular fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="like-count-{{node.pk}}"> {{node.likes.all|length}} </span></button></span>
	
									{% endif %}
	
								
									<span id="unlike2-{{node.pk}}" style="" ><button class="like-btn" onclick="myunlikefunc('{{node.pk}}', 'unlike2-{{node.pk}}')"><i class="fa-solid fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="count-unlike2-{{node.pk}}"> {{node.likes.all|length}}</span></button></span>
	
								{% endif %}
	
								<span id="unlike-{{node.pk}}" style="display:none;" ><button class="like-btn" onclick="myunlikefunc('{{node.pk}}','unlike-{{node.pk}}')"><i class="fa-solid fa-heart f12" style="color: #009cda; font-size:14px;"></i> <span id="count-unlike-{{node.pk}}"> {{node.likes.all|length}}</span></button></span>
	
									
	
	
									{% comment %} {% if node.level < 3 %}
									<button class="secondary-text" style="width:50px; border:none; background:none;" type="button" data-bs-toggle="collapse" data-bs-target="#{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
										reply
									</button>
								</p>
								<div class="collapse" id="{{node.pk}}">
									
									<form class="answer-form" action="" method='post'> {% csrf_token %}
										<input hidden  type="text" name='question-id' id="question-{{question.id}}" value="{{question.id}}">
											<input hidden type="text" name='answer-id' id="parent-{{node.id}}" value="{{node.id}}">
											<textarea class="flex-grow-1 quora-textarea" placeholder="Reply on stranger's answer" name="id_chat_message_input" id="id_chat_message_input_answer"></textarea>
											<button class="btn btn-sm btn-answer btn-dark" type="Submit"><span>reply</span></button>
									</form>
									
								</div> 
									<hr> 
									{% endif %} {% endcomment %}
	
	
									{% if node.level < 2 %}
									{% if request.user.is_authenticated %}
	
									<span><button class="secondary-text f12" style="width:50px; border:none; background:none; color: #009cda; font-size:14px;" type="button" data-bs-toggle="collapse" data-bs-target="#reply-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
										reply
									</button></span>
	
									{% endif %}
							   
								</div>
	
								{% if request.user.is_authenticated %}
	
	
								<div class="collapse replybox" id="reply-{{node.pk}}">
									
									<form class="answer-form" id="repform-{{node.id}}" onsubmit="submitForm(event, 'repform-{{node.id}}', 'null', 'reply-{{node.pk}}', 'id_chat_message_input_answer-{{node.id}}')" action="" method='post'> {% csrf_token %}
										<input hidden  type="text" name='question-id' id="question-{{question.0.id}}" value="{{question.0.id}}">
											<input hidden type="text" name='answer-id' id="parent-{{node.id}}" value="{{node.id}}">
											<textarea class="flex-grow-1 quora-textarea reply-textarea" placeholder="Reply on stranger's answer" name="id_chat_message_input" id="id_chat_message_input_answer-{{node.id}}"></textarea>
											<button class="btn btn-sm btn-answer btn-dark" type="Submit"><span>reply</span></button>
										</form>
									
								</div> 
	
									{% endif %}
									 
									{% endif %}
	
									{% if not node.is_leaf_node %}
	
									<button class="secondary-text mb- view_rep_btn f12" style="width:80px; border:none; background:none; color:#009cda; font-size:13px; margin-left:6em; margin-top:-1.78em;" type="button" data-bs-toggle="collapse" data-bs-target="#replies-{{node.pk}}" aria-expanded="false" aria-controls="collapseExample">
										view replies
									</button>
	
									<div class="collapse" id="replies-{{node.pk}}">
	
										<div class="children pl-2 pl-md-5 card-reply-main">
										{{ children }}
										</div>
	
									</div>
									{% endif %}
									 
										
	
									</div>
								</div>
								{% endrecursetree %}
								
	
							</div>
	
						</div>
	
					{% endif %}
	
					
	
					<div id="elemental-{{question.0.pk}}" style="margin-top:0.5em;">
	
						
						{% if request.user.is_authenticated %}
						
						{% comment %} {% if not question.0.polls.all %} {% endcomment %}
						<form class="answer-form" style="{% if question.0.image or question.0.video %}width: 80%;{% endif %}" id="ansform-{{question.0.pk}}" onsubmit="submitForm(event, 'ansform-{{question.0.pk}}', 'elemental-{{question.0.pk}}', 'null', 'id_chat_message_input-{{question.0.pk}}')" action="" method='post'> {% csrf_token %}
							<input hidden type="text" name='question-id' id="question-{{question.0.pk}}" value="{{question.0.pk}}">
							<textarea class="flex-grow-1 quora-textarea" placeholder="Answer stranger's question" name="id_chat_message_input" id="id_chat_message_input-{{question.0.pk}}"></textarea>
	
								<button class="btn btn-sm btn-answer btn-dark" type="Submit"><span>Add answer</span></button>
	
								
							</form>
							{% comment %} {% endif %} {% endcomment %}
							{% else %}
						   
	
							   <p style="font-size:12px; text-align:center;">~login to answer</p>
						{% endif %}
					</div>  
	
						{% comment %} <button class="btn btn-sm btn-outline-dark">See Answers</button> {% endcomment %}
						
						{% comment %} <a class="nearby-num" href="#"><button class="btn btn-sm btn-outline-dark">{{delta.students}} Students</button></a> {% endcomment %}
					
			
					</div>
				{% comment %} </div> {% endcomment %}
			{% comment %} </div> {% endcomment %}
				
				{% endfor %}

				{% else %}
					
					{% if posts_active %}
						<p style="text-align:center;">{{account.name}} has not posted anything yet</p>
						{% elif answers_active %}
						<p style="text-align:center;">{{account.name}} has not vibed at anything yet</p>
					{% endif %}

				{% endif %}
				
		</div>
		
	</div>
</div>

{% if prompts%}

{% if messages %}
    {% for message in messages %}
      <div style="margin-bottom: 0px;" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong></strong> {{message}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
	{% endif %}

	{% if is_self %}
	<div class="card d-flex" style="justify-content:center; align-items:center; border:none; margin-bottom: 4px;">
		<a style="color:#009cda;" href="{% url "account:prompt" %}">Add prompts <i class="fa-regular fa-pen-to-square ml-2" aria-hidden="true"></i></a>
	</div>
	{% endif %}

	{% for prompt in prompts %}
	
		

		
{% comment %} <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"> {% endcomment %}

<div class="section_our_solution" style="padding: 8px 20px;">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="our_solution_category">
        <div class="solution_cards_box">
          <div class="solution_card" id="prompt-card-{{prompt.id}}">
            <div class="hover_color_bubble"></div>
            
            <div class="solu_title" style="display: flex;
			align-items: center;
			justify-content: space-between;">
              <h6>{{prompt.question}}</h6>
			  {% if is_self %}
			  <div class="dropdown">
                        
				<button class="btn btn-secondary dropdown-toggle dots" type="button" data-bs-toggle="dropdown" aria-expanded="false">
					<span style="margin-left:1em; display: flex; margin-top: 4px;" class="img2"><i class="fa-solid fa-ellipsis-vertical"></i></span></button>
					<ul class="dropdown-menu report-dpn">

							
							<li><button class="dropdown-item" onclick="myprompdeletefunc('{{prompt.id}}', 'prompt-card-{{prompt.id}}')" type="button">Delete</button></li>
							
							
						</ul>
					</div>
					{% endif %}

            </div>
            <div class="solu_description">
              <p style="margin-bottom: 4px;">
                {{prompt.answer}}
              </p>
              
            </div>
          </div>
          
        
      </div>
    </div>
  </div>
</div>
</div>






	{% endfor %}

{% elif is_self and realme %}
<div class="container mt-3 mb-3">

	{% if messages %}
    {% for message in messages %}
      <div style="margin-bottom: 0px;" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong></strong> {{message}}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
	{% endif %}

	<div class="row justify-content-center">
		
	</div>
	<div class="row justify-content-center">
		<div class="width-add-prom" style="padding: 0px; width:95%;">
			<div class="wrapper" style="padding: 0px; max-width:none;">
				<div class="row no-gutters">
					
					<div class="d-flex align-items-stretch" style="padding: 0px;">
						<div class="info-wrap w-100 p-md-5 p-4 py-2 img">
							<h5 class="a-p-h mb-3" style="color: white;">Tell Other's who you really are </h5>
							<p class="mt-2 ml-2 a-p-s-h" style="color:white;">Be your real self , tell others who you really are ,
								what you really want and what you really like, without
								the fear of being judged. </p>
							<p class="mb-4 mt-2 ml-2 a-p-s-h" style="color:white;">Throw away all the social criteria's and tell 
								other college students the real side of you.
								The side that no one knows , the side that
								you don't easily express.</p>
							{% comment %} <div class="dbox w-100 d-flex align-items-start"> {% endcomment %}
								<!-- <div class="icon d-flex align-items-center justify-content-center">
									<span class="fa fa-map-marker"></span>
								</div> -->

								<div>
								<a href="{% url "account:prompt" %}"><input type="button" value="Add Prompts" class="btn btn-primary btn-feedback"></a>
							</div>
								
						</div>
					</div>
					
				</div>
			</div>
		</div>
	</div>
</div>


{% endif %}

	

</div>


<!-- Bootstrap Modal -->
<div class="modal" tabindex="-1" role="dialog" id="shareModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Share Post</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Share this link:</p>
          {% comment %} <input type="text" class="form-control mb-3" id="shareLink" value="https://mystranger.in/vibes/question/ans_id/" readonly> {% endcomment %}
          <input type="text" class="form-control mb-3" id="shareLink" readonly>
          <button class="btn btn-primary" onclick="copyLink()">Copy Link</button>
        </div>
      </div>
    </div>
  </div>


  


<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.7/dist/sweetalert2.min.js"></script>


<script type="text/javascript">

	{% if request.user_agent.is_mobile %}

	// Function to show the custom alert
function showCustomAlert() {
    

	var bottomPosition = getBottomPosition("customAlert");

if (bottomPosition === 0) {
    console.log("The bottom position is 0.");
	var customAlert = document.getElementById("customAlert");
    customAlert.style.transition = "bottom 0.5s ease-out";
	customAlert.style.bottom = "-170px";
} else {
    console.log("The bottom position is not 0.");
	var customAlert = document.getElementById("customAlert");
    customAlert.style.display = "block";
    customAlert.style.bottom = "0px";
}
}

function getBottomPosition(elementId) {
	var element = document.getElementById(elementId);
	if (element) {
		var computedStyle = getComputedStyle(element);
		var bottomPosition = parseInt(computedStyle.bottom);
		return bottomPosition;
	} else {
		return null; // Element with the specified ID not found
	}
}

// Function to close the custom alert
{% comment %} function closeCustomAlert() {
    
    
} {% endcomment %}

// Attach click event to the vibescore container
document.getElementById("vibescore").addEventListener("click", function() {
    showCustomAlert();
});

{% endif %}

 
window.flrscreen == null;
var userHasUnmuted = false;

function addVideoEventListeners(video) {

	adjustVideoWidth(video);
	// Listen for the play event
	video.addEventListener('play', function() {
		// Pause all other videos
		var videos = document.getElementsByTagName('video');
		
		for (let i = 0; i < videos.length; i++) {
			if (videos[i] !== video && videos[i] !== window.flrscreen) {
				videos[i].pause();
			}
		} 

		// Unmute the video if the user has unmuted a video before
		if (userHasUnmuted) {
			video.muted = false;
		}
	});

	// Listen for the pause event
	video.addEventListener('pause', function() {
		// Mute the video when it's paused
		video.muted = true;
	});

	// Listen for the volumechange event
	video.addEventListener('volumechange', function() {
		// Remember if the user has unmuted the video
		if (!video.muted) {
			userHasUnmuted = true;
		}
	});
}


// Create an Intersection Observer to watch the videos
var observer = new IntersectionObserver(function(entries, observer) {
entries.forEach(entry => {
	if (entry.isIntersecting) {
		// The video is visible, play it
		if(window.flrscreen == null){

			entry.target.play();
		}
		console.error('playing the video -',entry.target)
	} else {
		// The video is not visible, pause it
		entry.target.pause();
	}
});
}, { threshold: 0.5 });  // Adjust the threshold value as needed

// Get all video elements and add the event listeners
var videos = document.getElementsByTagName('video');
for (let i = 0; i < videos.length; i++) {
addVideoEventListeners(videos[i]);
observer.observe(videos[i]);
}

{% comment %} 

window.addEventListener('DOMContentLoaded', (event) => {
	// Get all video elements
	var videos = document.getElementsByTagName('video');

	for (let i = 0; i < videos.length; i++) {
		addVideoEventListeners(videos[i]);
	}
}); {% endcomment %}


// Event listener for the fullscreenchange event on window
window.addEventListener('fullscreenchange', function() {

	console.log('At least one video is in fullscreen - ',document.fullscreenElement);
	// The video has entered fullscreen mode
	var fullscreenElement = document.fullscreenElement;
	if(fullscreenElement != 'null' || fullscreenElement != null){
		window.flrscreen = fullscreenElement
			fullscreenElement.play().catch(error => console.error('Error trying to play the video:', error));
		
			var videos = document.getElementsByTagName('video');
		
			for (let i = 0; i < videos.length; i++) {
				if (videos[i] !== window.flrscreen) {
					videos[i].muted = true;
					videos[i].pause();
					console.error(videos[i])
				}
			} 
	
	} else{
		window.flrscreen = null
	}
		 
  
});

{% if request.user_agent.is_mobile %}

document.addEventListener("DOMContentLoaded", function() {
	var previewImage = document.getElementById("previewImage");
	if (previewImage.complete) {
		adjustHeight(previewImage);
	} else {
		previewImage.onload = function() {
			adjustHeight(this);
		};
	}
});

function adjustHeight(img) {
	// Get image dimensions
	var width = img.naturalWidth;
	var height = img.naturalHeight;

	// Set height conditionally based on the image's orientation
	var imageContainer = img.parentElement;
	imageContainer.style.height = width > height ? 'unset' : '225px';
}


function adjustVideoWidth(video) {
	// Check if the video is loaded
	if (video.readyState >= 1) {
		// Check if the video is in vertical mode (height > width)
		if (video.videoHeight > video.videoWidth) {
			// The video is a reel, set the width to 46%
			video.style.width = "46%";
		} else {
			// The video is in horizontal rectangle mode, set the width to 100%
			video.style.width = "100%";
		}
	}
}

{% else %}

function adjustVideoWidth(video) {
	// Check if the video is loaded
	if (video.readyState >= 1) {
		// Check if the video is in vertical mode (height > width)
		if (video.videoHeight > video.videoWidth) {
			// The video is a reel, set the width to 46%
			video.style.width = "250px";
			video.style.height = "300px";
		} else {
			// The video is in horizontal rectangle mode, set the width to 100%
			video.style.width = "80%";
		}
	}
}

{% endif %}

	
    function adjustHeight(img) {
        // Get image dimensions
        var width = img.naturalWidth;
        var height = img.naturalHeight;
    
        // Set height conditionally based on the image's orientation
        var imageContainer = img.parentElement;
        imageContainer.style.height = width > height ? 'unset' : '225px';
    }

	// Open the lightbox
	function openLightbox(link) {
        console.error('bc got clicked')
        var imageUrl = link.getAttribute('href');
        var lightbox = link.nextElementSibling; // Assuming the lightbox is the next sibling
        lightbox.querySelector('.lightbox-image').src = imageUrl;
        lightbox.style.display = 'flex'; // Change from 'block' to 'flex'
    }

    // Close the lightbox
    function closeLightbox(closeButton) {
        var lightbox = closeButton.parentNode; // Get the parent lightbox container
        lightbox.style.display = 'none';
    }


    function openLightboxnamo(element) {
        event.preventDefault();
        openLightbox(element);
    }

	// called from base_js.html
	//preloadImage("{{profile_image|safe}}", 'id_profile_image')

	function onFriendRequestSent(){
		location.reload();
		// though reloding the page is the easiest and most convenient way but we can try to do this without reloading the page
		// if there's a way to do so then that is going to enhance the user experience

	}

	function onFriendRequestAccepted(){
		location.reload();
	}


	function onFriendRemoved(){
		location.reload();
	}

	function onFriendRequestDeclined(){
		location.reload();
	}

	function onFriendRequestCancelled(){
		location.reload();
	}


	var sendFriendRequestBtn = document.getElementById("id_send_friend_request_btn")
	if (sendFriendRequestBtn != null){
		sendFriendRequestBtn.addEventListener("click", function(){
			sendFriendRequest("{{id}}", onFriendRequestSent)
		})
	}

	
	function triggerAcceptFriendRequest(friend_request_id){
		acceptFriendRequest(friend_request_id, onFriendRequestAccepted)
	}

	function triggerDeclineFriendRequest(friend_request_id){
		declineFriendRequest(friend_request_id, onFriendRequestDeclined)
	}

	var removeFriendBtn = document.getElementById("id_unfriend_btn")
	if (removeFriendBtn != null){
		removeFriendBtn.addEventListener("click", function(){
			removeFriend("{{id}}", onFriendRemoved)
		})
	}

	var cancelFriendRequestBtn = document.getElementById("id_cancel_friend_request_btn")
	if(cancelFriendRequestBtn != null){
		cancelFriendRequestBtn.addEventListener("click", function(){
			cancelFriendRequest("{{id}}", onFriendRequestCancelled)
		})
	}


</script>


<script>

    function myselecfunc(pollid,allpollid){
        console.log('I am getting called baby - ',pollid,allpollid)
        

        <!-- Now i gotta disable click on all polls with allpollid  -->
        // Get all elements with the class "pollidea"
        var pollElements = document.getElementsByClassName('poll-'+allpollid);

        // Loop through each element and disable the onclick function
        for (var i = 0; i < pollElements.length; i++) {
            // Disable the onclick function
            pollElements[i].onclick = null;
        }

        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",
			"poll-id": pollid,
            'action' : 'poll-selected',
			'account' : 'yup',
			'account_id' : {{account.id}},
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
			

                if(data['status'] == "got_data"){ 

                    console.log(data.response)
                    mydict = data.response
                    for (var key in mydict) { 
                        var percentage = mydict[key];
                        
                        polltransition = document.getElementById('innerbar-'+key)
                        {% comment %} polltransition.style.background = '#009cda' {% endcomment %}
                        polltransition.style.width = percentage + '%';
                        {% comment %} polltransition.style.transition = 'width 2s ease'; // Adjust the duration and easing as needed {% endcomment %}
                       
                        document.getElementById('persia-'+key).innerHTML = percentage + ' %'
                        {% comment %} document.getElementById('poll-count-'+key).innerHTML = percentage + ' %' {% endcomment %}

                    }

                    var elementa = document.getElementById('tick-'+pollid)
                    console.log('tick-',pollid, elementa)
                    elementa.style.display = 'flex';

                    var currentValue = document.getElementById('poll-count-' + allpollid).innerHTML;
                    {% comment %} console.log('valval - ', currentValue) {% endcomment %}
                    // Convert the value to a number (assuming it's a numeric value)
                    var currentNumber = parseInt(currentValue, 10);
                    

                    // Add 1 to the value
                    var newValue = currentNumber + 1;

                    // Update the element with the new value
                    document.getElementById('poll-count-' + allpollid).innerHTML = newValue + ' vibes';

					if (pollid == data.ac_poll_id){
					console.log(pollid,data.ac_poll_id,'idk-man ----')
						document.getElementById('ac-poll-'+data.ac_poll_id).style.display = 'flex'; 
						document.getElementById('vibestat-'+allpollid).style.display = 'inline'; 
					}
					

                }
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				{% comment %} alert("Something went wrong.") {% endcomment %}
			},
			complete: function(data){
				// Req is made
			}
		});

       }

    function openShareModal(postId) {
        {% comment %} var dynamicLink = `https://example.com/post/${postId}`; {% endcomment %}
        {% comment %} var dynamicLink = `https://mystranger.in/vibes/question/${postId}/`; {% endcomment %}
        var dynamicLink = `https://mystranger.in/vibes/question/${postId}/?question=true`;
        document.getElementById('shareLink').value = dynamicLink;
        $('#shareModal').modal('show');
      }
    
      function copyLink() {
        var shareLinkInput = document.getElementById('shareLink');
        shareLinkInput.select();
        document.execCommand('copy');
        Swal.fire('Link Copied!', '', 'success');
      }
    
      // Close modal when clicking outside
      $(document).mouseup(function (e) {
        var modal = $('#shareModal');
        if (!modal.is(e.target) && modal.has(e.target).length === 0) {
          modal.modal('hide');
        }
      });

    {% comment %} function add_friend(send_req_btn_id, receiver_id, cancel_req_btn_id){
        console.log('add friend got clicked')
        var sendFriendRequestBtn = document.getElementById(send_req_btn_id)
        if (sendFriendRequestBtn != null){
           
                sendFriendRequest(receiver_id, function () {
                    onFriendRequestSent(send_req_btn_id, cancel_req_btn_id); // Pass the variable to onFriendRequestSent
               
            })
        }
} {% endcomment %}

{% comment %} function cancel_friend(send_req_btn_id, receiver_id, cancel_req_btn_id){

console.log('cancel friend got clicked')
var cancelFriendRequestBtn = document.getElementById(cancel_req_btn_id)
	if(cancelFriendRequestBtn != null){
		
			cancelFriendRequest(receiver_id, function(){
                onFriendRequestCancelled(send_req_btn_id, cancel_req_btn_id)
            
		})
	}

} {% endcomment %}

{% comment %} function onFriendRequestSent(send_req_btn_id, cancel_req_btn_id){
    var sendFriendRequestBtn = document.getElementById(send_req_btn_id)
    sendFriendRequestBtn.style.display = "none"

    var cancelFriendRequestBtn = document.getElementById(cancel_req_btn_id)
    cancelFriendRequestBtn.classList.remove("d-none");
    // though reloding the page is the easiest and most convenient way but we can try to do this without reloading the page
    // if there's a way to do so then that is going to enhance the user experience
} {% endcomment %}

{% comment %} function onFriendRequestCancelled(send_req_btn, cancel_req_btn){

    var cancelFriendRequestBtn = document.getElementById(cancel_req_btn)
    cancelFriendRequestBtn.classList.add("d-none");

    var sendFriendRequestBtn = document.getElementById(send_req_btn)
    sendFriendRequestBtn.style.display = "inline-block"
} {% endcomment %}

    function mytoogleanswersfunc(id){
        console.log('func getin called')
        var btn_txt = document.getElementById(id)
        var textva = btn_txt.innerHTML

        console.log(textva)

        if (textva == 'see more answers'){
            btn_txt.innerHTML = 'see less answers'
            {% comment %} console.log('see less answers') {% endcomment %}
        } else if (textva == 'see less answers'){
            btn_txt.innerHTML = 'see more answers'
            {% comment %} console.log('see more answers') {% endcomment %}
        }
    }


    function myreportfunc(id){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",   
			"node-id": id,
            'action' : 'report',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "reported"){
					// ui is updated
                    console.log('This answer has been has reported')
                    alert('The answer/reply has been reported!')
					
				}
                else if(data.response == 'Already Reported')
                alert('You have already reported this answer/reply')
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				{% comment %} alert("Something went wrong.") {% endcomment %}
			},
			complete: function(data){
				// Req is made
			}
		});
    }

    function myunlikefunc(id,spanid){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",
			"node-id": id,
            'action' : 'unlike',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "unliked"){
					// ui is updated
                    console.log('your unlike has been added')

                    var unlikespan = document.getElementById(spanid);
                    var unlikecount = document.getElementById('count-'+spanid).innerHTML
                    unlikespan.style.display = 'none';

                    var likespan = document.getElementById('like-'+id);
                    var count = document.getElementById('like-count-'+id)
                    var newNum = parseInt(unlikecount, 10) - 1;
                    count.innerHTML = newNum;
                    likespan.style.display = 'inline';
                    
					
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				{% comment %} alert("Something went wrong.") {% endcomment %}
			},
			complete: function(data){
				// Req is made
			}
		});
    }


    function mylikefunc(id){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",   
			"node-id": id,
            'action' : 'like',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "liked"){
					// ui is updated
                    console.log('your like has been added')
                    var likespan = document.getElementById('like-'+id);
                    likespan.style.display = 'none';

                    var unlikespan = document.getElementById('unlike-'+id);
                    var count = document.getElementById('count-unlike-'+id)
                    var likecount = document.getElementById('like-count-'+id).innerHTML
                    var newNumber = parseInt(likecount, 10) + 1;
                    count.innerHTML = newNumber;
                    unlikespan.style.display = 'inline';
					
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				{% comment %} alert("Something went wrong.") {% endcomment %}
			},
			complete: function(data){
				// Req is made
			}
		});
    }


    function mydeletefunc(id,cardId){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",
			"node-id": id,
            'action' : 'delete',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "card deleted"){
					// ui is updated
                    console.log('The post has been deleted', cardId)
                    var card = document.getElementById(cardId);
                    card.style.display = 'none';
					{% comment %} uiUpdateFunction() {% endcomment %}
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				alert("Something went wrong.")
			},
			complete: function(data){
				// Req is made
			}
		});
    }

	function myprompdeletefunc(id,cardId){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",
			"promp-id": id,
            'action' : 'delete',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'account:prompt' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "card deleted"){
					// ui is updated
                    console.log('The prompt has been deleted', cardId)
                    var card = document.getElementById(cardId);
                    card.style.display = 'none';
					
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				alert("Something went wrong.")
			},
			complete: function(data){
				// Req is made
			}
		});
    }

    function myquestiondeletefunc(id,cardId){
        payload = {
			"csrfmiddlewaretoken": "{{ csrf_token }}",
			"node-id": id,
            'action' : 'delete_my_question',
		}
		$.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url 'qna:addAnswer' %}",
			timeout: 5000,
			data: payload,
			success: function(data) {
				console.log("SUCCESS", data)
				if(data['response'] == "card deleted"){
					// ui is updated
                    console.log('The post has been deleted', cardId)
                    var card = document.getElementById(cardId);
                    card.style.display = 'none';
					{% comment %} uiUpdateFunction() {% endcomment %}
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
				alert("Something went wrong.")
			},
			complete: function(data){
				// Req is made
			}
		});
    }

    function myreadmorefunc(id){
        console.log('am i even getting called!')
        readMoreBtn = document.getElementById(id)
        readMoreBtn.style.display = 'none'
    }

    function submitForm(event, formId, ansElemental, repElemental, textareaId) {
        // Prevent the default form submission
        event.preventDefault();

        // Your AJAX logic here
        var formData = new FormData(document.getElementById(formId));


        $.ajax({
			type: 'POST',
			dataType: "json",
			url: "{% url "qna:addAnswer" %}",
			timeout: 5000,
			data: formData,
            processData: false, // Set processData and contentType to false
            contentType: false,
			success: function(data) {
				console.log("SUCCESS", data);
                if(data['status'] == "Answered"){
					
                    console.log('Boom your answer has been generated now just gotta have to update the ui')
                    document.getElementById(textareaId).value = ''
                    // Create a new element
                        // Create a new card element
                        var newCard = document.createElement('div');
                        newCard.className = 'card';
                        newCard.classList.add('card-answer'); 
                        newCard.id = 'card-' + data.nodeId;
                        newCard.innerHTML = '<div class="card-body card-body-answer" style="flex-direction: column;">' +
                                                '<p class="text-secondary" style="font-size:12px; margin-bottom:0px;">' + data.name + ' | ' + data.domain + '</p>' + 
                                                
                                                '<span><a class="on_add_class" onclick="mydeletefunc(\'' + data.nodeId + '\', \'card-' + data.nodeId + '\')">delete</a></span>' +
                                                
                                                '<p>' + data.content + '</p>'
                                            '</div>';

                        // Find the existing div
                        var existingDiv = document.getElementById(ansElemental); // Replace with the actual ID of your existing div

                        // Insert the new card before the existing div
                        existingDiv.parentNode.insertBefore(newCard, existingDiv);

				}
                if(data['status'] == "Replied"){
					
                    console.log('Boom your reply has been generated now just gotta have to update the ui')
                    inpval = document.getElementById(textareaId).value = ''
                    
                        // Create a new card element
                        var newCard = document.createElement('div');
                        newCard.className = 'card';
                        newCard.classList.add('card-answer'); 
                        newCard.classList.add('card-reply'); 
                        newCard.id = 'card-' + data.nodeId;
                        newCard.style.marginLeft = '3em';
                        newCard.innerHTML = '<div class="card-body card-body-answer" style="flex-direction: column;">' +
                                                '<p class="text-secondary" style="font-size:12px; margin-bottom:0px;">' + data.name + ' | ' + data.domain + '</p>' +
                                                
                                                '<span><a class="on_add_class" onclick="mydeletefunc(\'' + data.nodeId + '\', \'card-' + data.nodeId + '\')">delete</a></span>' +
                                                
                                                '<p>' + data.content + '</p>'
                                            '</div>';

                        // Find the existing div
                        var existingDiv = document.getElementById(repElemental); // Replace with the actual ID of your existing div

                        // Insert the new card before the existing div
                        existingDiv.insertAdjacentElement('afterend', newCard);
                    
				}
				
			},
			error: function(data) {
				console.error("ERROR...", data)
                alert('Some error occured while answering. Please try again later - ', data.message)
				
			},
			complete: function(data){
				// Req is made
			}
		}); 
    }

</script>


{% include 'friend/snippets/send_friend_request.html' %}
{% include 'friend/snippets/accept_friend_request.html' %}
{% include 'friend/snippets/remove_friend.html' %}
{% include 'friend/snippets/decline_friend_request.html' %}
{% include 'friend/snippets/cancel_friend_request.html' %}
{% include 'chat/snippets/create_or_return_private_chat.html' %}



{% endblock body %}